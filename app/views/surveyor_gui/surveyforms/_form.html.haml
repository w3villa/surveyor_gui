#survey
  %h3{style: "margin-left: 8px;"}
    = @title
    -if !params[:course_id].blank? && params[:action] == "edit"
      = link_to 'Back', "/companies/courses/#{params[:course_id]}/lessons/#{params[:lesson_id]}/topics/#{params[:topic_id]}", class: 'btn btn-danger pull-right ml-3', style: ' margin-left: 10px;'
    -if params[:department_id] && params[:action] == "edit"
      = link_to 'Back', "/companies/departments/#{params[:department_id]}/evaluation_form", class: 'btn btn-danger pull-right ml-3', style: ' margin-left: 10px;'
    -if @surveyform.present? && !params[:course_id]
      = link_to 'Back', "/companies/departments/#{@surveyform.department_id}/evaluation_form", class: 'btn btn-danger pull-right ml-3', style: ' margin-left: 10px;'
    - if !params[:course_id]   
      - if @surveyform.id
        .span{style: "float: right"}
      - if !params[:department_id].present? && !@surveyform.department_id.present?
        - if @surveyform.id
          = link_to "Back To Survey  |  ", surveyor_gui.surveyform_path(@surveyform), class: "btn-link"
          = link_to "View All Surveys", surveyor_gui.surveyforms_path, class: "btn-link"

  = simple_form_for [surveyor_gui, @surveyform] do |f|
    = f.error_messages

    - if params[:action] == "show"
      %h3
        = @surveyform.title
        -if params[:course_id]
          = link_to 'Back', "/companies/courses/#{params[:course_id]}/lessons/#{params[:lesson_id]}/topics/#{params[:topic_id]}", class: 'btn btn-danger pull-right ml-3', style: ' margin-left: 10px;'
          = link_to 'Edit Quiz', "/companies/courses/#{params[:course_id]}/lessons/#{params[:lesson_id]}/topics/#{params[:topic_id]}/topic-quiz/edit/#{@surveyform.id}", class: 'btn btn-primary pull-right' 
        - else
          = link_to "Edit", edit_surveyform_path(@surveyform.id), class: "btn-sm btn-primary"
    - else
      .panel.panel-default
        = f.hidden_field :id
        = f.hidden_field :topic_id,  :value => @topic_id
        = f.input :title, :required=>true, input_html: { class: "quiz", style: "font-size: 16px;" }
        = f.input :internal_title
        = f.input :template, :disabled=>@survey_locked, :label => "Template?"
        = f.input :quiz, :disabled=>@survey_locked, :label => "Quiz?", input_html: { class: "quiz" }
        = f.input :public, :disabled=>@survey_locked, :label => "Public?", input_html: { class: "quiz" }

        - if @survey_locked
          %p
            %button.go_back.btn-sm.btn-primary{:type => "button"} Go Back
        - else
          %p= f.button :submit, 'Save Changes', class: "btn btn-success", data: { disable_with: "Please wait..." }

    .sections{"data-survey_locked" => @survey_locked, class: ("sortable_sections" unless params[:action] == "show")}
      = render "survey_section_fields", :s => builder , :f => f

:css
  .ui-datepicker{
    position: absolute;
    top: 945.984px;
    left: 403px;
    z-index: 1;
    display: block;
    background: white;
    padding: 10px;
  }
  .ui-datepicker td{
    padding:5px
  }